var mongoose = require('mongoose')
var distance = {}

distance.getCoordinate = function (doc) {
  return [doc.x, doc.y]
}

distance.getDistance = function (obj1, obj2) {
  return Math.pow(obj1.x - obj2.x, 2) + Math.pow(obj1.y - obj2.y, 2)
}

distance.compare = function (obj1, obj2) {
  if (obj1.distance > obj2.distance) {
    return 1
  } else {
    return -1
  }
}

distance.order = function (array, session) {
  array.forEach(function (entry) {
    entry.x = Math.random() * 100
    entry.distance = distance.getDistance(session, entry)
  })
  return array.sort(distance.compare)
}

distance.coordinatePlugin = require('./coordinatePlugin')

module.exports = distance
